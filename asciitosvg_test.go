// Copyright 2012 - 2015 The ASCIIToSVG Contributors
// All rights reserved.

package asciitosvg

import (
	"testing"

	"github.com/maruel/ut"
)

func TestNewCanvas(t *testing.T) {
	data := `
      +------+
      |Editor|-------------+--------+
      +------+             |        |
          |                |        v
          v                |   +--------+
      +------+             |   |Document|
      |Window|             |   +--------+
      +------+             |
         |                 |
   +-----+-------+         |
   |             |         |
   v             v         |
+------+     +------+      |
|Window|     |Window|      |
+------+     +------+      |
                |          |
                v          |
              +----+       |
              |View|       |
              +----+       |
                |          |
                v          |
            +--------+     |
            |Document|<----+
            +--------+
`
	NewCanvas([]byte(data))
}

func TestOddPolygons(t *testing.T) {
	data := `
    +----+
    |    |
+---+    +----+
|             |
+-------------+

+----+
|    |
|    +---+
|        |
|    +---+
|    |
+----+

    +----+
    |    |
+---+    |
|        |
+---+    |
    |    |
    +----+

             +-----+-------+
             |     |       |
             |     |       |
        +----+-----+----   |
--------+----+-----+-------+---+
        |    |     |       |   |
        |    |     |       |   |     |   |
        |    |     |       |   |     |   |
        |    |     |       |   |     |   |
--------+----+-----+-------+---+-----+---+--+
        |    |     |       |   |     |   |  |
        |    |     |       |   |     |   |  |
        |   -+-----+-------+---+-----+   |  |
        |    |     |       |   |     |   |  |
        |    |     |       |   +-----+---+--+
             |     |       |         |   |
             |     |       |         |   |
     --------+-----+-------+---------+---+-----
             |     |       |         |   |
             +-----+-------+---------+---+
`
	c := NewCanvas([]byte(data))
	o := c.FindPolygons()
	ut.AssertEqual(t, 28, len(o))
}
